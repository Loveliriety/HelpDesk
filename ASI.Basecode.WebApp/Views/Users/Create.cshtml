@{
    ViewData["Title"] = "Contact Us Form";
}

<div class="ContactUs-Section">
    <h5 class="contact-header mb-4">Contact Us Form</h5>
    <div class="card shadow-sm border-2 bg-transparent contact-card">
        <div class="ContactUs-Inner">
            <form asp-action="Create" asp-controller="Users" method="post">
                @Html.AntiForgeryToken()
                <div class="mb-4">
                    <label for="issueCategorySelect" class="contact-label form-label">Issue Category</label>
                    <select class="form-select select-input" id="issueCategorySelect" asp-items="ViewBag.Categories" name="CategoryId" required>
                        <option value="">--</option> <!-- Ensure there's a value attribute -->
                    </select>
                </div>
                <div class="mb-4">
                    <label for="issueSubject" class="contact-label form-label">Issue Subject</label>
                    <input type="text" class="form-control text-input" id="issueSubject" name="Subject" placeholder="Provide subject of the issue here..." required>
                </div>
                <div class="mb-4">
                    <label for="issueDescription" class="contact-label form-label">Issue Description</label>
                    <textarea class="form-control text-input" id="issueDescription" name="Description" rows="4" placeholder="Provide details of the issue here..." required></textarea>
                </div>
                <div class="mb-4">
                    <label for="priorityLevel" class="form-label">Priority Level</label>
                    <select class="form-select select-input" id="priorityLevel" name="Priority" required>
                        <option value="">--</option>
                        <option value="P5">Lowest (P5 - Minimal impact)</option>
                        <option value="P4">Low (P4 - Minor inconvenience)</option>
                        <option value="P3">Medium (P3 - Affects usability but functional)</option>
                        <option value="P2">High (P2 - Blocking access to critical features)</option>
                        <option value="P1">Critical (P1 - Immediate attention required)</option>
                    </select>
                </div>
                <div class="d-flex justify-content-center mt-4">
                    <a asp-action="Index" asp-controller="Users" class="btn cancel-btn mx-2">Cancel</a>
                    <button type="submit" class="btn submit-btn mx-2">Submit Ticket</button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        var errorMessage = '@TempData["ErrorMessage"]';
        if (errorMessage) {
            toastr.error(errorMessage);
        }

        var successMessage = '@TempData["SuccessMessage"]';
        if (successMessage) {
            toastr.success(successMessage);
        }
    </script>
}
